# 1. 项目综述

## 1.1 背景

1. **官网记忆**：晒你官网已停运许久，社团内部一直有复活官网的呼声，期望通过还原官网数据来重建社团回忆。
2. **产品缺位**：目前市面上缺乏一款能同时满足以下需求的内容生态平台：

   - 帮助晒你人扩展内部社交圈（扩展社交圈）。
   - 将个人创作与社团历史深度绑定（绑定社团）。
   - 提供足够低的创作门槛，消除分享顾虑（低创作门槛）。

   我们希望能制作一款填补上述空缺的产品，让晒你人可以在其中自由创作、随心分享、广泛交流。

## 1.2 双子星战略

为填补上述空缺，我们打算开发两个紧密关联的产品：

### 1.2.1 晒你官网 (shining-acg-site，简称 site)

- **定位**：社团对外展示风貌的门面与回忆的起点。
- **核心功能**：
  - 展示社团各类基础信息。
  - 聚合展示“晒你 App”的热门帖子。
  - 复刻经典的“部长宣言”模块。

### 1.2.2 晒你 App (shining-acg-app，简称 app)

- **定位**：强绑定 QQ 生态的以`个人创作`、`生活分享`内容为主 UGC 平台。
- **核心功能**：
  - 提供低门槛的内容发布体验。
  - 通过内容渠道帮助用户建立联系，扩展交际圈。
  - 集成对 app 和 site 的管理功能。

## 1.3 竞品分析与差异化

### 1.3.1 对比与优势

前文说过 app 的定位与填补的内容生态平台缺位，因此本节主要针对相同定位（生活分享、个人创作）的 app 进行分析，重点考察现有平台在“扩展社交圈”、“绑定社团”、“低创作门槛”三个方面的表现。

| 平台        | 特点                                               | 优点                                   | 痛点 (针对本社团需求)                                                                                      |
| :---------- | :------------------------------------------------- | :------------------------------------- | :--------------------------------------------------------------------------------------------------------- |
| **QQ 空间** | 强熟人社交链，私密性高，是社团成员目前的存量活跃地 | 创作门槛极低，心理负担小，适合高频分享 | **社交封闭**：无法触达未加好友的社团新人，难以扩展交际圈；<br>**缺乏沉淀**：内容难以检索，无法绑定社团历史 |
| **小红书**  | 强算法推荐，重美感                                 | 标签化分发利于同好聚集，互动氛围好     | **门槛较高**：对质量有要求，劝退了随意的日常记录；<br>**关系疏离**：公域流量为主，难以转化为社团深度社交   |
| **B 站**    | 二次元浓厚，中长视频                               | 适合发布高质量的社团活动记录或个人大作 | **门槛过高**：视频制作耗时，不适合图文形式；<br>**反馈较难**：普通人的日常内容难以获得流量与关注           |
| **抖音**    | 强算法推荐，短视频                                 | 创作工具丰富，爆款曝光大               | **沉淀困难**：消费极度碎片化，难以建立稳定社团社交                                                         |

可以看出，app 锚定了晒你这一独特的群体，在众多社交平台上形成了独特的差异化路线。

### 1.3.2 困境与突围

虽然现有平台存在痛点，但其培养的用户习惯构成了巨大的优势。对于用户来说，‘摆脱痛点’的收益往往难以抵消‘学习新软件’和‘多平台分发’带来的巨大成本。因此，我们不能仅靠痛点驱动，必须在**最小化用户使用门槛**的同时，**最大化我们独有的社团优势**，才能真正吸引用户。

### 1.3.2.1 最小化使用门槛

1. **无感登录**：利用 QQ 互联实现一键登录，无需记忆额外账号密码。
2. **零成本迁移**：交互逻辑复用主流社交 App (如小红书/QQ 空间) 习惯，降低学习成本。
3. **智能发布**：统一发布入口，系统自动根据素材类型（纯文、单图、多图、视频）适配最佳展示版式。

### 1.3.2.2 最大化社团优势

1. **身份认同强化**：
   - 在 app 全局强化“部门”概念，用户头像旁常驻部门徽章。
   - site 首页聚合展示 app 优质内容，让普通社员的作品有机会成为社团“门面”。
2. **社交关系沉淀**：
   - **私域互通**：支持个人主页挂载外部社交链接，帮助社员将社团内的弱关系转化为全平台的强关注。
   - **即时触达**：利用原生推送能力，确保社团内的互动（评论、私信）能像 QQ 消息一样被即时感知，解决“回访难”问题。

# 2. 全局规范设计

## 2.1 品牌识别

现有的晒你 logo 符合实用主义但不符合现代 App 的审美，因此我们需要寻找设计师重新设计能应用于 site & app 的晒你 logo。

> [logo 示意（查看“品牌形象设计”section）](https://www.figma.com/design/tdgnWdU2Pp1ihar7svr5W7/shining-acg-app-shadcn-ui---Design-System--Community-?node-id=173-1417)

- **r-logo (长方形)**：用于在 header 中标识品牌形象。
- **s-logo (正方形)**：用于在浏览器标签页上和移动端应用图标上表示品牌形象。

### 2.2 时间显示规则

> 含义差别：
>
> “昨天”通常指日历上的“前一日”（the previous calendar day）。
>
> “一天前”（“1 day ago”）更偏向于持续时间，通常理解为大约 24 小时之前（严格含义是距今 >=24 小时且 <48 小时）。

**原则 A：即时性优先 (用于帖子、评论、互动)**

- < 1 分钟：显示“刚刚”
- 1-59 分钟：显示“xx 分钟前”
- 1-23 小时：显示“xx 小时前”
- 1-6 天：显示“x 天前” (需 >= 24h)
- \>= 7 天 (本年)：显示“MM-DD”
- 非本年：显示“YYYY-MM-DD”

**原则 B：准确性优先 (用于私信、聊天记录)**

- 今天：显示“HH:mm”
- 昨天：显示“昨天 HH:mm”
- 昨天以前，< 7 天：显示“星期 X”
- \>= 7 天 (本年)：显示“MM-DD”
- 非本年：显示“YYYY-MM-DD”

## 2.3 UI 适配策略

- **site**：
  - 采用 PC/Mobile 双端适配策略。
  - 若人力不足，优先保证 PC 端开发。
- **app**：
  - 采用全响应式设计。
  - 重点适配手机竖屏操作，同时兼容折叠屏与平板设备的布局流转。

## 2.4 消息通知系统

> 仅涉及 app。结合[消息](#322-内容模块)理解

### 2.4.1 通知类型

1. **互动通知**
   - 我的消息：当接收到其他用户私信时通知。
   - 评论和 @：当用户被评论或 @时通知。
   - 赞和收藏：当用户被赞或收藏时通知。
   - 新增关注：当用户新增粉丝时通知。
   - 晒你通知：当管理员 & 超级管理员发布新通知时通知用户（2 期 TODO）。
2. **社区内容通知**
   - 关注作者对更新：当用户的关注列表中有人发布了新帖子。
3. **管理通知（仅对管理员 & 超级管理员可见）**：
   - 举报受理：当有新举报时通知用户。

### 2.4.2 推送策略

- **app 前台**：使用 WebSocket 长连接，应用内顶部横幅提示。
- **app 后台/杀进程**：
  - 移动端：调用系统级推送 (APNs / FCM / 厂商通道)。
  - PC 端：浏览器 Web Notification。
- **开关控制**：用户可在 [更多-通知设置] 中精细化控制各类通知的接收。

## 2.5 搜索系统

> 仅涉及 app。结合[app 模块](#32-app-模块)理解

### 2.5.1 全局 header 搜索框

- **功能**

  1. **首页**：搜索帖子/用户。
  2. **消息**：
     - **我的消息**：搜索私信用户/聊天记录。
     - **评论和 @**：搜索帖子/用户。
     - **赞和收藏**：搜索帖子/用户。
     - **新增关注**：搜索帖子/用户。
     - **晒你通知**：搜索帖子/用户。
  3. **发布**：搜索帖子/用户。
  4. **管理**：
     - **举报受理**：搜索举报受理记录。
     - **权限管理**：搜索帖子/用户。
     - **通知管理**：搜索帖子/用户。
     - **官网编辑**：搜索帖子/用户。
  5. **个人资料**：搜索用户帖子/收藏/赞记录。
  6. **搜索结果**：搜索帖子/用户。
  7. **关注/共同关注/粉丝/留言板查看页面**：搜索关注/共同关注/粉丝查看页面


- **特点**：搜索当前页面中主要信息流的内容。支持键盘快捷键、历史记录、快捷推荐搜索。
    1. 键盘快捷键：enter 键执行搜索。
    2. 历史记录：均为纯文本记录，保存在用户本地。
    3. 快捷搜索推荐：上面“功能”所写。
## 2.6 缺省与异常页

- **布局**
  1. 用户友好的中文错误解释。
  2. 开发者友好的报错代码。
  3. “返回首页”按钮。
  4. 此页面铺满视口，作为整个系统的错误兜底。

## 2.7. 用户与权限

### 2.7.1 角色定义

| 产品            | 目标用户         | 核心诉求                                      |
| :-------------- | :--------------- | :-------------------------------------------- |
| **site (官网)** | 全网用户 (游客)  | 了解社团文化、获取社团资讯、欣赏优秀作品      |
|                 | 社团成员         | 获得归属感、成就感                            |
| **app (应用)**  | 全网用户（游客） | 查看帖子内容                                  |
|                 | 社团成员         | 社交互动、内容分享、身份认同                  |
|                 | 管理员           | 内容封禁、site & app 内容维护                 |
|                 | 超级管理员       | 用户及内容封禁、权限管理、site & app 内容维护 |

### 2.7.2 准入与鉴权机制

- **site**：完全开放，无登录门槛。
- **app**：严格的白名单机制。
  - 基于 QQ 登录鉴权。
  - 系统自动校验登录 QQ 是否在社团成员白名单中。
  - 非白名单用户只能访问首页和指定的某个帖子，其余模块均无法访问。

# 3. 模块概要设计

### 3.1 site 模块

> [示意网站](https://www.mihoyo.com/)

| 模块         | 功能描述                   |
| :----------- | :------------------------- |
| **首页**     | 等待资源加载与品牌形象展示 |
| **了解我们** | 社团介绍、社团历史         |
| **部门信息** | 各部门信息展示             |
| **活动信息** | 各类晒你活动展示           |
| **热门动态** | App 优质内容聚合           |
| **部长宣言** | 每一届新部长上任时的自介   |
| **关于网站** | 赞助感谢、网站 staff       |

正在考虑将“关于网站”模块中的内容与“了解我们“合并。

> [模块关系图（查看”site 模块关系图“section）](https://www.figma.com/design/tdgnWdU2Pp1ihar7svr5W7/shining-acg-app-shadcn-ui---Design-System--Community-?node-id=173-1417)

### 3.2 app 模块

> [示意图（查看“app 模块设计”section）](https://www.figma.com/design/tdgnWdU2Pp1ihar7svr5W7/shining-acg-app-shadcn-ui---Design-System--Community-?node-id=173-1417)

#### 3.2.1 全局布局

1. **导航栏**

   - 模块切换：采用经典的 Tab 导航栏结构来在不同模块之间切换。
     1. 首页
     2. 消息
     3. 发布
     4. 管理
     5. 我（[个人资料](#322-内容模块)模块的特殊情况，既个人资料模块填充了当前用户的信息）

2. **header**

   - r-logo/返回按钮/空：**PC 端**始终显示 r-logo，**移动端**
   - 搜索栏：作为全局醒目元素承担当前模块下最重要的搜索功能。
   - “更多”按钮
     1. **site 跳转按钮**
     2. **各类设置页面**
        - 隐私设置
        - 通知设置
        - 存储空间
        - ......
     3. **深色模式设置**
     4. **退出登录**

### 3.2.2 内容模块

3. **首页（home）**
   - 内容瀑布流：推荐/时间/热度/关注/部门分类/内容分类的帖子瀑布流。
4. **消息（notification）**
   - 我的消息：支持端到端加密 1v1 实时聊天。
   - 评论和 @：用户收到的评论和@信息。
   - 赞和收藏：用户获得的赞和收藏。
   - 新增关注：新关注用户的其他用户。
   - 晒你通知：管理人员下发的通知内容（2 期 TODO）。
5. **发布（release）**
   - 极简发布器：支持图文视频混排以及纯文字内容，系统自动根据素材类型（纯文、单图、多图、视频）适配最佳展示版式。
6. **管理（management）**
   - 举报受理：被社团用户举报的帖子/评论/用户会在这里聚合显示，等待管理员及超级管理员处理。
   - 权限管理：超级管理员可以在这里编辑社团用户的权限级别。
   - 通知管理：发布和编辑”消息“模块推送的”晒你通知“内容（2 期 TODO）。
   - 官网编辑：编辑官网内容。
7. **个人资料（profile）**

   - 个人信息：头像、用户名、QQ 号、签名、各项数据......
   - 身份标识：所属部门。
   - 外部链接：集成 B 站、微博等外部社交账号跳转，注意安全策略。

8. **搜索结果（search）**
   - 内容瀑布流：帖子/用户，接受各种查询参数。

### 3.2.3 各类设置选项

> [模块关系图（查看”app 模块关系图“section）](https://www.figma.com/design/tdgnWdU2Pp1ihar7svr5W7/shining-acg-app-shadcn-ui---Design-System--Community-?node-id=173-1417)

# 5. 模块详细设计

## 5.1 site

### 5.1.1 全局 Header

- **布局**：
  1. header 全局显示，在页面顶部固定。
  2. 分为左右两边，左边放置一个 r-logo，右边从左到右依次排列跳转到各个模块的按钮。
  3. 在“首页”隐藏以提供沉浸式体验，在其他模块显示。
- **交互**：
  1. 点击 r-logo 跳转至首页。
  2. 点击模块按钮跳转至对应模块。

### 5.1.2 首页

- **加载流程**：用户访问 www.shiningacg.club 首先展示加载进度条，资源加载完毕显示“100%”后，通过华丽的动效平滑过渡至主界面。
- **布局**：
  1. 背景播放“晒你动漫社宣传视频”，遮罩一层灰色蒙版。
  2. 页面中心放置“Shining ACG Fan Club”英文艺术字或晒你 slogan。
  3. 文字下方显示背景视频全屏播放按钮。
  4. 按钮下方持续播放一个动画，提醒用户上滑进入下一页。
  5. 隐藏全局 header。
- **交互**：
  1. 点击全屏播放按钮后，全屏播放“晒你动漫社宣传视频”。
  2. 上滑进入“了解我们”模块。

### 5.1.3 内容模块

- **了解我们**：Tab 切换“关于晒你”/“发展历程”。
- **部门信息**：展示各部门介绍。
- **活动信息**：各类晒你活动展示。
- **热门动态**：聚合 App 优质内容。
- **部长宣言**：每一届新部长上任时的自介。
- **关于网站**：赞助感谢、网站 staff。

---

## 5.2 app

### 5.2.1 导航框架 (Navigation)

| 终端       | 导航位置 | 菜单项                           | 特殊逻辑             |
| :--------- | :------- | :------------------------------- | :------------------- |
| **PC 端**  | 左侧固定 | 首页, 消息, 发布, 我, (底部)更多 | 未登录时“我”变“登录” |
| **移动端** | 底部固定 | 首页, 消息, 发布, 管理, 我       | 社员隐藏“管理”Tab    |

- **未读数**：Tab 上角标显示未读数量。
- **更多菜单**：包含 Site 跳转、隐私/通知设置、深色模式、退出登录。

### 5.2.2 全局 Header

- **布局**：
  1. header 全局显示，在页面顶部固定。
  2. **PC 端**：r-logo 靠左，搜索框居中，“晒你官网”按钮靠右。
  3. **移动端**：搜索框居中，“更多”按钮靠右。
- **交互**：
  1. **PC 端**：点击“晒你官网”新建标签页打开 www.shiningacg.club。
  2. **移动端**：点击”更多”按钮后，弹出 popover。
  3. 点击 r-logo 导航到首页。
  4. 点击搜索框，随着用户输入，向后台实时获取推荐的搜索结果。支持键盘快捷键搜索。

### 5.2.3 首页 (Home)

- **内容**：推荐/时间/热度/关注/部门分类/内容分类的帖子瀑布流。
- **卡片样式**：复用帖子卡片组件。

### 5.2.4 消息 (Notification)

- **子模块**：

  - **我的消息**：支持端到端加密 1v1 实时聊天。
  - **评论和 @**：用户收到的评论和@信息。
  - **赞和收藏**：用户获得的赞和收藏。
  - **新增关注**：新关注用户的其他用户。
  - **晒你通知**：管理人员下发的通知内容（2 期 TODO）。

  > 聊天用户列表中，只有今天和昨天显示时分秒；对话窗口中 5 种显示规则均显示时分秒，且每 3min 没有新的聊天记录则划分一个新的对话区间。

### 5.2.5 发布 (Release)

- **功能**：极简发布器，支持图文视频混排以及纯文字内容。
- **逻辑**：系统自动根据素材类型（纯文、单图、多图、视频）适配最佳展示版式。

### 5.2.6 管理 (Management)

- **权限**：仅管理员/超管可见。
- **功能**：
  - **举报受理**：处理被举报内容。
  - **权限管理**：编辑用户权限。
  - **通知管理**：发布和编辑”消息“模块推送的”晒你通知“内容（2 期 TODO）。
  - **官网编辑**：编辑官网内容。

### 5.2.7 个人中心 (Profile)

- **信息**：头像、用户名、QQ 号、签名、各项数据、所属部门。
- **功能**：集成 B 站、微博等外部社交账号跳转。

### 5.2.8 设置模块

- **隐私设置**：
  - 互动：我的收藏/点赞（公开/关注/互关/隐藏），私信权限。
- **通知设置**：
  - 全局通知开关：接收消息通知（开/关）。
  - 互动通知、管理通知、社区内容通知。
- **存储空间**：管理缓存。

---

# 交付设计

## 性能需求

## 兼容性需求

## 数据埋点需求

## 日志记录需求

## 可靠性需求

## 部署与合规策略

- **架构**：Web Core + Native Shell。
- **部署**：海外部署 (Cloudflare + R2)，不进行 ICP 备案。
- **分发**：
  - Android: 官网 APK。
  - iOS: TestFlight。
